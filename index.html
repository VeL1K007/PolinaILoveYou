<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ù–∞—à –î–µ–Ω—å –†–æ–∂–¥–µ–Ω–∏—è üéÇ‚ù§Ô∏è</title>
  <style>
    body {
      background: 
        radial-gradient(circle at 20% 20%, rgba(255, 182, 193, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 192, 203, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(255, 228, 225, 0.4) 0%, transparent 50%),
        linear-gradient(135deg, #fff5f8 0%, #ffe8ed 50%, #ffd6e1 100%);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      text-align: center;
      padding: 40px;
      user-select: none;
      overflow-x: hidden;
      height: 100vh;
      overflow-y: hidden;
    }

    #heart-container {
      position: relative;
      margin-bottom: 20px;
    }

    #heart {
      font-size: 120px;
      color: #e91e63;
      cursor: pointer;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    .heart-fall {
      position: fixed;
      font-size: 28px;
      color: #ff4081;
      pointer-events: none;
      animation: fall 3s linear forwards;
      user-select: none;
    }

    @keyframes fall {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(600px) scale(0.5);
        opacity: 0;
      }
    }

    #message {
      font-size: 24px;
      color: #ad1457;
      margin: 20px 0;
      min-height: 40px;
      font-weight: 500;
      text-shadow: 0 1px 2px rgba(255,255,255,0.8);
    }

    #shared-birthday {
      font-size: 28px;
      font-weight: 600;
      color: #d81b60;
      margin-top: 30px;
      white-space: nowrap;
      overflow: hidden;
      position: relative;
      display: none;
      text-shadow: 0 1px 3px rgba(255,255,255,0.9);
      letter-spacing: 0.5px;
    }
    
    #shared-birthday::after {
      content: "";
      position: absolute;
      right: 0;
      width: 3px;
      height: 100%;
      background-color: #d81b60;
      animation: blinkCursor 0.75s step-end infinite;
    }

    #timer {
      font-size: 20px;
      color: #880e4f;
      font-weight: 500;
      margin-top: 10px;
      display: none;
      text-shadow: 0 1px 2px rgba(255,255,255,0.7);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    #letter-container {
      margin-top: 40px;
      position: relative;
      display: none;
    }

    #emoji-envelope {
      font-size: 90px;
      cursor: pointer;
      transition: transform 0.3s ease;
      z-index: 2;
    }

    #emoji-envelope:hover {
      transform: scale(1.1);
    }

    #sliding-letter {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translate(-50%, 0);
      width: 250px;
      overflow: hidden;
      height: 0;
      transition: height 1s ease;
      z-index: 1;
    }

    .letter-paper {
      background: #fffafc;
      border: 2px solid #e91e63;
      border-radius: 10px;
      padding: 20px;
      font-size: 18px;
      color: #6a1b9a;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      animation: fadeIn 1s ease-in;
    }

    #fireworks-canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100vw;
      height: 100vh;
      z-index: 0;
    }

    @keyframes blinkCursor {
      0%, 100% { border-color: transparent; }
      50% { border-color: #d81b60; }
    }

    /* –ö–æ—Ç—è—Ç–∞ —Å—Ç–∏–ª–∏ */
    .kitten {
      position: fixed;
      font-size: 40px;
      z-index: 10;
      pointer-events: none;
      animation: moveKitten 15s linear infinite;
    }

    .kitten-message {
      position: absolute;
      background: #fff;
      border: 2px solid #ff69b4;
      border-radius: 20px;
      padding: 8px 12px;
      font-size: 14px;
      color: #d81b60;
      font-weight: 600;
      white-space: nowrap;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      top: -50px;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      animation: showMessage 4s ease-in-out;
      text-shadow: none;
      letter-spacing: 0.3px;
    }

    .kitten-message::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 8px solid transparent;
      border-top-color: #ff69b4;
    }

    @keyframes moveKitten {
      0% {
        transform: translateX(0px) translateY(0px);
      }
      25% {
        transform: translateX(calc(100vw / 4)) translateY(-50px);
      }
      50% {
        transform: translateX(calc(100vw / 2)) translateY(0px);
      }
      75% {
        transform: translateX(calc(100vw * 3 / 4)) translateY(-30px);
      }
      100% {
        transform: translateX(calc(100vw - 60px)) translateY(0px);
      }
    }

    @keyframes showMessage {
      0%, 10% {
        opacity: 0;
        transform: translateX(-50%) translateY(10px);
      }
      15%, 85% {
        opacity: 1;
        transform: translateX(-50%) translateY(0px);
      }
      90%, 100% {
        opacity: 0;
        transform: translateX(-50%) translateY(-10px);
      }
    }

    /* –†–∞–∑–Ω—ã–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∫–æ—Ç—è—Ç */
    .kitten-path-1 {
      animation: moveKitten1 12s linear infinite;
    }

    .kitten-path-2 {
      animation: moveKitten2 18s linear infinite;
    }

    .kitten-path-3 {
      animation: moveKitten3 14s linear infinite;
    }

    @keyframes moveKitten1 {
      0% {
        transform: translateX(0px) translateY(50px);
      }
      20% {
        transform: translateX(calc(100vw / 5)) translateY(20px);
      }
      40% {
        transform: translateX(calc(100vw / 2)) translateY(70px);
      }
      60% {
        transform: translateX(calc(100vw * 3 / 5)) translateY(10px);
      }
      80% {
        transform: translateX(calc(100vw * 4 / 5)) translateY(60px);
      }
      100% {
        transform: translateX(calc(100vw - 60px)) translateY(30px);
      }
    }

    @keyframes moveKitten2 {
      0% {
        transform: translateX(calc(100vw - 60px)) translateY(80px);
      }
      25% {
        transform: translateX(calc(100vw * 3 / 4)) translateY(40px);
      }
      50% {
        transform: translateX(calc(100vw / 2)) translateY(90px);
      }
      75% {
        transform: translateX(calc(100vw / 4)) translateY(20px);
      }
      100% {
        transform: translateX(0px) translateY(50px);
      }
    }

    @keyframes moveKitten3 {
      0% {
        transform: translateX(0px) translateY(100px);
      }
      30% {
        transform: translateX(calc(100vw / 3)) translateY(30px);
      }
      70% {
        transform: translateX(calc(100vw * 2 / 3)) translateY(80px);
      }
      100% {
        transform: translateX(calc(100vw - 60px)) translateY(40px);
      }
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (max-width: 768px) {
      .kitten {
        font-size: 30px;
      }
      
      .kitten-message {
        font-size: 12px;
        padding: 6px 10px;
        top: -40px;
      }
      
      #shared-birthday {
        font-size: 22px !important;
        max-width: 90vw;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      
      #heart {
        font-size: 80px;
      }
      
      body {
        padding: 20px;
      }
    }

    @media (max-width: 480px) {
      #shared-birthday {
        font-size: 18px !important;
        max-width: 95vw;
      }
      
      #message {
        font-size: 18px;
      }
      
      body {
        padding: 15px;
      }
    }

    @media (max-width: 320px) {
      #shared-birthday {
        font-size: 16px !important;
        max-width: 98vw;
      }
      
      #heart {
        font-size: 60px;
      }
      
      #message {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>

<div id="heart-container">
  <div id="heart">‚ù§Ô∏è</div>
</div>

<div id="message">–ù–∞–∂–º–∏ –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æ üòâ</div>

<div id="shared-birthday"></div>

<div id="timer"></div>

<div id="letter-container">
  <div id="emoji-envelope">üì©</div>
  <div id="sliding-letter">
    <div class="letter-paper">
      –¢—ã –º–æ—ë –≥–ª–∞–≤–Ω–æ–µ —á—É–¥–æ —ç—Ç–æ–≥–æ –¥–Ω—è.<br>
      –Ø —Å—á–∞—Å—Ç–ª–∏–≤, —á—Ç–æ –º—ã —Ä–æ–¥–∏–ª–∏—Å—å –≤ –æ–¥–∏–Ω –¥–µ–Ω—å üíå
    </div>
  </div>
</div>

<canvas id="fireworks-canvas"></canvas>

<script>
  const heart = document.getElementById('heart');
  const message = document.getElementById('message');
  const timer = document.getElementById('timer');
  const birthday = document.getElementById('shared-birthday');
  const letter = document.getElementById('letter-container');
  const emojiEnvelope = document.getElementById('emoji-envelope');
  const slidingLetter = document.getElementById('sliding-letter');
  const canvas = document.getElementById('fireworks-canvas');
  const ctx = canvas.getContext('2d');

  const phrases = [
    "–ü–æ–ª–∏–Ω–∞, —Ç—ã –º–æ—ë —Å–µ—Ä–¥–µ—á–∫–æ! üíå",
    "–° –∫–∞–∂–¥—ã–º –¥–Ω—ë–º —è –≤—Å—ë —Å–∏–ª—å–Ω–µ–µ –≤–ª—é–±–ª—è—é—Å—å –≤ —Ç–µ–±—è üíó",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è —Å—á–∞—Å—Ç–ª–∏–≤–µ–µ —Å –∫–∞–∂–¥–æ–π –º–∏–Ω—É—Ç–æ–π üíû",
    "–ú—ã –æ–±–∞ —Ä–æ–¥–∏–ª–∏—Å—å –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å ‚Äî —Å—É–¥—å–±–∞ —è–≤–Ω–æ –±—ã–ª–∞ –≤ —É–¥–∞—Ä–µ! üéâ",
    "–õ—é–±–ª—é —Ç–≤–æ–π –≥–æ–ª–æ—Å, —É–ª—ã–±–∫—É –∏ —Ç–≤–æ—ë —Å–µ—Ä–¥–µ—á–∫–æ ‚ù§Ô∏è",
    "–¢—ã ‚Äî –º–æ–π –ø–æ–¥–∞—Ä–æ–∫ –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è ‚ú®"
  ];

  // –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–æ—Ç—è—Ç
  const kittenMessages = [
    "–Ø —Ç–µ–±—è –ª—é–±–ª—é! üíï",
    "–¢—ã —Å–∞–º–∞—è –ª—É—á—à–∞—è! ‚≠ê",
    "–ú–æ—è –ø—Ä–∏–Ω—Ü–µ—Å—Å–∞! üëë",
    "–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞! üåπ",
    "–ú–æ–π –∞–Ω–≥–µ–ª! üòá",
    "–°–æ–ª–Ω—ã—à–∫–æ –º–æ—ë! ‚òÄÔ∏è",
    "–¢—ã –æ—Å–æ–±–µ–Ω–Ω–∞—è! ‚ú®",
    "–ú–æ—è —Ä–∞–¥–æ—Å—Ç—å! üåà",
    "–õ—é–±–æ–≤—å –º–æ—è! üíñ",
    "–¢—ã —á—É–¥–µ—Å–Ω–∞—è! ü¶ã",
    "–ú–æ—è –∑–≤—ë–∑–¥–æ—á–∫–∞! ‚≠ê",
    "–¢—ã –≤–æ–ª—à–µ–±–Ω–∞—è! ü™Ñ",
    "–°–æ–∫—Ä–æ–≤–∏—â–µ –º–æ—ë! üíé",
    "–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è! üåü",
    "–ú–æ—è –º–µ—á—Ç–∞! üí≠",
    "–¢—ã —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–∞—è! üéà",
    "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è! üíù",
    "–ú–æ—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è! üåå"
  ];

  // –≠–º–æ–¥–∑–∏ –∫–æ—Ç—è—Ç
  const kittenEmojis = ['üê±', 'üòª', 'üò∫', 'üêØ', 'üò∏', 'üôÄ', 'üòΩ', 'üêà'];

  const startDate = new Date('2025-05-28T00:00:00');

  // –†–∞–∑–Ω—ã–µ –≤–∏–¥—ã –ø–∞–¥–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  const fallingElements = ['üíñ', 'üíï', 'üíó', 'üíì', 'üíù', 'üç∞', 'üßÅ', 'üç≠', 'üç¨', 'üç´', 'üåπ', 'üéÄ', '‚ú®', '‚≠ê', 'üåü'];

  function createFallingHeart() {
    const newHeart = document.createElement('div');
    const randomElement = fallingElements[Math.floor(Math.random() * fallingElements.length)];
    newHeart.textContent = randomElement;
    newHeart.classList.add('heart-fall');
    newHeart.style.left = Math.random() * window.innerWidth + 'px';
    newHeart.style.top = '0px';
    
    // –°–ª—É—á–∞–π–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è (–±—ã—Å—Ç—Ä–∞—è –∏–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–∞—è)
    if (Math.random() > 0.5) {
      newHeart.style.animationDuration = '4s';
    }
    
    document.body.appendChild(newHeart);
    setTimeout(() => newHeart.remove(), 4000);
  }

  function createKitten() {
    const kitten = document.createElement('div');
    const randomEmoji = kittenEmojis[Math.floor(Math.random() * kittenEmojis.length)];
    const randomMessage = kittenMessages[Math.floor(Math.random() * kittenMessages.length)];
    const randomPath = Math.floor(Math.random() * 3) + 1;
    
    kitten.innerHTML = randomEmoji;
    kitten.classList.add('kitten', `kitten-path-${randomPath}`);
    
    // –°–ª—É—á–∞–π–Ω–∞—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    const randomY = Math.random() * (window.innerHeight - 200) + 100;
    kitten.style.top = randomY + 'px';
    
    // –°–æ–∑–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    const messageDiv = document.createElement('div');
    messageDiv.classList.add('kitten-message');
    messageDiv.textContent = randomMessage;
    kitten.appendChild(messageDiv);
    
    document.body.appendChild(kitten);
    
    // –£–¥–∞–ª—è–µ–º –∫–æ—Ç—ë–Ω–∫–∞ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
    const animationDuration = randomPath === 1 ? 12000 : randomPath === 2 ? 18000 : 14000;
    setTimeout(() => {
      if (kitten.parentNode) {
        kitten.remove();
      }
    }, animationDuration);
  }

  function startKittenShow() {
    // –°–æ–∑–¥–∞–µ–º –∫–æ—Ç—è—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
    const createKittenWithDelay = () => {
      createKitten();
      // –°–ª—É—á–∞–π–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç 3 –¥–æ 8 —Å–µ–∫—É–Ω–¥
      const nextDelay = Math.random() * 5000 + 3000;
      setTimeout(createKittenWithDelay, nextDelay);
    };
    
    // –ù–∞—á–∏–Ω–∞–µ–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å—Ü–µ–Ω—ã
    setTimeout(createKittenWithDelay, 2000);
  }

  function updateTimer() {
    const now = new Date();
    const diff = now - startDate;
    if (diff < 0) {
      timer.textContent = '–°–∫–æ—Ä–æ –Ω–∞—á–∞–ª–æ –Ω–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏!';
      return;
    }
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);
    timer.textContent = `–í–º–µ—Å—Ç–µ —É–∂–µ: ${days} –¥–Ω. ${hours} —á. ${minutes} –º–∏–Ω. ${seconds} —Å–µ–∫.`;
  }

  function showPhrases(index = 0) {
    if (index >= phrases.length) index = 0;
    message.textContent = phrases[index];
    setTimeout(() => showPhrases(index + 1), 4000);
  }

  function rainHearts(count = 40) {
    for (let i = 0; i < count; i++) {
      setTimeout(createFallingHeart, i * 150);
    }
  }

  function continuousHeartRain() {
    createFallingHeart();
    // –°–ª—É—á–∞–π–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç 800ms –¥–æ 2000ms
    const nextDelay = Math.random() * 1200 + 800;
    setTimeout(continuousHeartRain, nextDelay);
  }

  function startScene() {
    if (sceneStarted) return;
    sceneStarted = true;

    rainHearts(50);
    message.textContent = '';
    updateTimer();
    showPhrases();
    setInterval(updateTimer, 1000);

    birthday.style.display = 'inline-block';
    if (!birthdayTyped) {
      typeWriter("–° –î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –ü–æ–ª–∏–Ω–∞ üíñ", "shared-birthday", 120);
      birthdayTyped = true;
    }

    timer.style.display = 'block';
    letter.style.display = 'block';

    if (!fireworksStarted) {
      startFireworks();
      fireworksStarted = true;
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ—Ç—è—Ç
    if (!kittensStarted) {
      startKittenShow();
      kittensStarted = true;
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –¥–æ–∂–¥—å —Å–µ—Ä–¥–µ—á–µ–∫ –∏ —Å–ª–∞–¥–æ—Å—Ç–µ–π
    if (!continuousRainStarted) {
      setTimeout(continuousHeartRain, 3000);
      continuousRainStarted = true;
    }
  }

  let sceneStarted = false;
  let fireworksStarted = false;
  let birthdayTyped = false;
  let kittensStarted = false;
  let continuousRainStarted = false;

  heart.addEventListener('click', startScene);

  emojiEnvelope.addEventListener('click', () => {
    slidingLetter.style.height = '180px';
  });

  // –£–±—Ä–∞–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏ –≤ –Ω–∞—á–∞–ª–µ

  // Fireworks üéÜ
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const particles = [];

  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  function createFirework() {
    const x = random(100, canvas.width - 100);
    const y = random(50, canvas.height / 2);
    const color = `hsl(${Math.floor(Math.random() * 360)}, 100%, 60%)`;
    for (let i = 0; i < 25; i++) {
      const angle = (Math.PI * 2 * i) / 25;
      const speed = random(2, 5);
      particles.push({
        x,
        y,
        dx: Math.cos(angle) * speed,
        dy: Math.sin(angle) * speed,
        life: 100,
        color
      });
    }
  }

  function updateFireworks() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let i = particles.length - 1; i >= 0; i--) {
      const p = particles[i];
      p.x += p.dx;
      p.y += p.dy;
      p.dy += 0.05;
      p.life--;
      if (p.life <= 0) {
        particles.splice(i, 1);
      } else {
        ctx.beginPath();
        ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.fill();
      }
    }
  }

  function fireworksLoop() {
    if (Math.random() < 0.1) {
      createFirework();
    }
    updateFireworks();
    requestAnimationFrame(fireworksLoop);
  }

  function startFireworks() {
    canvas.style.display = 'block';
    fireworksLoop();
  }

  function typeWriter(text, elementId, delay = 100) {
    const el = document.getElementById(elementId);
    let i = 0;
    el.textContent = "";
    function typing() {
      if (i < text.length) {
        el.textContent += text[i];
        i++;
        setTimeout(typing, delay);
      }
    }
    typing();
  }

  function adjustFontSize() {
    const element = document.getElementById('shared-birthday');
    if (!element) return;
    const screenWidth = window.innerWidth;
    
    // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
    let fontSize;
    if (screenWidth <= 320) {
      fontSize = 16;
    } else if (screenWidth <= 480) {
      fontSize = 18;
    } else if (screenWidth <= 768) {
      fontSize = 22;
    } else if (screenWidth <= 1024) {
      fontSize = Math.min(screenWidth / 20, 30);
    } else {
      fontSize = Math.min(screenWidth / 25, 32);
    }
    
    element.style.fontSize = fontSize + 'px';
  }

  window.addEventListener('resize', adjustFontSize);
  adjustFontSize();  

  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
</script>

</body>
</html>
